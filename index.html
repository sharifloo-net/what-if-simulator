<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description"
	      content="Explore hypothetical scenarios and their consequences across daily life, economy, technology, and society">
	<meta name="theme-color" content="#6366f1">
	<title>What If? Simulator</title>
	<link rel="stylesheet" href="styles.css">
	<link rel="manifest" href="manifest.json">
	<link rel="icon" type="image/x-icon" href="icons/favicon.ico">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#6366f1">
</head>
<body>
<header class="header">
	<h1 class="header__title">What If? Simulator</h1>
	<div class="header__search">
		<input type="text" id="searchInput" placeholder="Search scenarios..." aria-label="Search scenarios">
	</div>
</header>

<main class="main">
	<aside class="sidebar">
		<div class="sidebar__section">
			<label for="scenarioSelect" class="sidebar__label">Select Scenario</label>
			<select id="scenarioSelect" class="sidebar__select"></select>
		</div>

		<div class="sidebar__section favorites">
			<div class="sidebar__header">
				<h3 class="sidebar__title">Favorites</h3>
			</div>
			<div id="favoritesList" class="scenario-buttons"></div>
		</div>

		<div class="sidebar__section all-scenarios">
			<div class="sidebar__header">
				<h3 class="sidebar__title">All Scenarios</h3>
			</div>
			<div id="scenarioButtons" class="scenario-buttons"></div>
		</div>

		<div class="sidebar__section sidebar__actions">
			<button id="generateBtn" class="btn btn--secondary">Generate with AI</button>
		</div>

		<div class="sidebar__section sidebar__actions">
			<button id="exportBtn" class="btn btn--outline">Export JSON</button>
			<button id="importBtn" class="btn btn--outline">Import JSON</button>
			<input type="file" id="importFile" accept=".json" hidden>
		</div>

		<div class="sidebar__section">
			<button id="favToggle" class="btn btn--favorite">
				<span id="favIcon">â˜†</span> Add to Favorites
			</button>
		</div>
	</aside>

	<section id="viewer" class="viewer">
		<div class="viewer__header">
			<h2 id="scenarioTitle" class="viewer__title">Select a scenario</h2>
			<p id="scenarioSeed" class="viewer__seed"></p>
		</div>
		<div id="sectionCards" class="section-cards"></div>
	</section>
</main>

<footer class="footer">
	<div class="footer__stats">
		<span>Total: <strong id="totalCount">0</strong></span>
		<span>Favorites: <strong id="favCount">0</strong></span>
	</div>
	<div id="offlineIndicator" class="footer__offline hidden">
		<span class="offline-dot"></span> Offline Mode
	</div>
</footer>


<div id="aiModal" class="modal hidden">
	<div class="modal__content">
		<h3 class="modal__title">Generate with AI</h3>
		<div class="modal__field">
			<label for="aiPrompt">Scenario Prompt</label>
			<input type="text" id="aiPrompt" placeholder="e.g., Humans live underwater">
		</div>
		<div class="modal__field">
			<label for="aiApiKey">OpenRouter API Key</label>
			<input type="password" id="aiApiKey" placeholder="sk-or-v1-...">
		</div>
		<div class="modal__field">
			<label for="aiModel">Model (optional)</label>
			<input type="text" id="aiModel" placeholder="e.g., anthropic/claude-3.5-sonnet"
			       value="nex-agi/deepseek-v3.1-nex-n1:free">
		</div>
		<p class="modal__note">Enter your OpenRouter API key. If generation fails (e.g., due to insufficient credits -
			error 402), a fallback generator will be used. Sign up at openrouter.ai for an API key and add credits if
			needed.</p>
		<div class="modal__actions">
			<button id="cancelAiModal" class="btn btn--outline">Cancel</button>
			<button id="generateAi" class="btn btn--primary">Generate</button>
		</div>
	</div>
</div>

<div id="loadingOverlay" class="loading-overlay hidden">
	<div class="loading-spinner"></div>
	<p>Generating scenario...</p>
</div>

<script src="app.js"></script>
</body>
</html>